<div ng-if="!stage.id || !content.id">Loading...</div>

<div ng-if="stage.id &amp;&amp; content.id">
	<div class="alert alert-info" role="alert" ng-if="status == 'draft'" sf-decorator-name="'bootstrap-decorator'">
		This stage is saved as a draft.
	</div>

	<div class="alert alert-info" role="alert" ng-if="status == 'complete'" sf-decorator-name="'bootstrap-decorator'">
		This stage is complete.
	</div>

	<div class="alert alert-warning" role="alert" ng-if="!content.authorizations.read" sf-decorator-name="'bootstrap-decorator'">
		You are not allowed to see the contents of this stage.
	</div>

	<div class="alert alert-warning" role="alert" ng-if="!content.authorizations.write &amp;&amp; content.authorizations.read" sf-decorator-name="'bootstrap-decorator'">
		Please note, you are not allowed to make changes to this stage.
	</div>

	<div class="row" ng-if="content.authorizations.read">

		<div class="col-md-5" ng-if="stage.component.options.instructions">
			<div class="panel panel-default" ng-show="stage.component.options.instructions">
				<div class="panel-heading">
					<span class="panel-title">{{cycle.title}}</span>
				</div>
				<div class="panel-body">
					<div ng-bind-html="stage.component.options.instructions"></div>
				</div>
			</div>
		</div>

		<div ng-class="{'col-md-7': stage.component.options.instructions, 'col-md-12': !stage.component.options.instructions}">
			<div class="panel panel-default">
				<div class="panel-heading">
					<span class="panel-title">{{stage.title}} - <b>{{content.status_id | title}}</b></span>
				</div>
				<div class="panel-body">

					<form name="gandhiFormComponent" ng-submit="complete(gandhiFormComponent)">
						<div ng-if="stage.component.options.schema &amp;&amp; stage.component.options.form" sf-model="content.data" sf-form="stage.component.options.form" sf-schema="stage.component.options.schema" sf-options="sfOptions"></div>
						<div ng-show="content.authorizations.write &amp;&amp; options.draft !== false" ng-click="draft()" class="btn btn-default" ng-bind="options.draftButtonText || 'Save Draft'"></div>
						<button ng-show="content.authorizations.write" class="btn btn-primary" ng-bind="options.submitButtonText || 'Submit'"></button>
					</form>

				</div>
			</div>
		</div>

	</div>
</div>