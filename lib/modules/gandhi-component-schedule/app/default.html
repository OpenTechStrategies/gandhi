<div class="panel panel-default">
	<div class="panel-heading">
		<span class="panel-title">{{stage.title}}</span>
	</div>
	<div class="panel-body">
		<div class="alert alert-warning" role="alert" ng-show="!permissions.read" sf-decorator-name="'bootstrap-decorator'">Sorry, but you don't have permission to read this stage.</div>

		<div style="overflow-x: auto;">
		<div class="table">
			<form name="gandhiFormComponent" ng-submit="submit(gandhiFormComponent, data)">
				<div sf-model="data" sf-form="options.form" sf-schema="options.schema" sf-options="config"></div>


				<label>Schedule a Time: ({{timezone}})</label>
				<div class="help-block" ng-bind-html="description"></div>

				<div style="overflow-x: auto;">
					<table class="table table-bordered">
						<tr>
							<th ng-repeat="group in schedule">{{group[0].begin | date:'EEEE, MMMM d'}}</th>
						</tr>
						<tr>
							<td ng-repeat="group in schedule">
								<ul class="nav nav-pills nav-stacked">
									<li ng-repeat="slot in group" ng-class="{disabled: !slot.available, active: slot.id == data.reservation}"><a href ng-click="reserve(slot)">{{slot.begin | date:'h:mm a':timezone}} - {{slot.end | date:'h:mm a':timezone}}</a></li>
								</ul>
							</td>
						</tr>
					</table>
				</div>

				<div ng-disabled="lock" ng-show="options.draft !== false" ng-click="lock ? null : save()" class="btn btn-default">Save Draft</div>
				<button ng-disabled="lock" class="btn btn-primary">Submit</button>
			</form>
		</div>

	</div>
</div>
