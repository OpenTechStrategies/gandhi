<div class="row">
	<div class="col-md-6">


		<ul class="nav nav-tabs">
			<li role="presentation" ng-class="{active: tab == 'inbox'}"><a href ng-click="tab = 'inbox'">Inbox</a></li>
			<li role="presentation" ng-class="{active: tab == 'archive'}"><a href ng-click="tab = 'archive'">Archive</a></li>
		</ul>
		<div class="panel panel-default" ng-if="tab == 'inbox'">
			<div class="panel-body">
				<div ng-if="!(notifications | filter: inbox).length">Your inbox is empty!</div>
				<div class="list-group" ng-if="(notifications | filter: inbox).length">
					<div class="list-group-item" ng-repeat="n in notifications | filter: inbox | orderBy : 'created' : false" ng-class="{'list-group-item-info': n.status == 'unread'}">
						<div ng-class="{'list-group-item-heading': reading == n.id}">
							<div class="row">
								<div class="col-sm-9">
									<strong>{{n.subject}}</strong><br />
									<small>{{n.created * 1000 | date:"yyyy.MM.dd - hh:mm a"}}</small>
								</div>
								<div class="col-sm-3">
									<div class="btn btn-primary btn-xs btn-block" ng-class="{active: reading == n.id}" ng-click="read(n)">Read</div>
									<div class="btn btn-default btn-xs btn-block" ng-click="archive(n)">Archive</div>
								</div>
							</div>
						</div>
 						<p class="list-group-item-text" ng-show="reading == n.id">{{n.content}}</p>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-default" ng-if="tab == 'archive'">
			<div class="panel-body">
			<div ng-if="!notifications.length">You have no notifications.</div>
				<div class="list-group" ng-if="notifications.length">
					<div class="list-group-item" ng-repeat="n in notifications | orderBy : 'created' : false" ng-class="{'list-group-item-info': n.status == 'unread'}">
						<div ng-class="{'list-group-item-heading': reading == n.id}">
							<div class="row">
								<div class="col-sm-9">
									<strong>{{n.subject}}</strong><br />
									<small>{{n.created * 1000 | date:"yyyy.MM.dd - hh:mm a"}}</small>
								</div>
								<div class="col-sm-3">
									<div class="btn btn-primary btn-xs btn-block" ng-class="{active: reading == n.id}" ng-click="read(n)">Read</div>
								</div>
							</div>
						</div>
 						<p class="list-group-item-text" ng-show="reading == n.id">{{n.content}}</p>
					</div>
				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<span class="panel-title">Active Projects</span>
				<div class="pull-right">
					<a ui-href="portal.projects" class="btn btn-default btn-xs">All Projects</a>
				</div>
			</div>
			<div class="panel-body">
				<div ng-if="!(projects | filter : {authorizations:{create:true}}).length">You have no active projects.</div>
				<div ng-if="(projects | filter : {authorizations:{create:true}}).length" class="list-group">
					<div ng-repeat="project in projects | filter : {authorizations:{create:true}}" class="list-group-item">
						<h4 class="list-group-item-heading">{{project.title}}</h4>
					</div>
				</div>
			</div>
		</div>

		<!-- TODO: implement invitations
		<div class="panel panel-default">
			<div class="panel-heading">
				<span class="panel-title">Invitations</span>
			</div>
			<div class="panel-body">
				<span class="help-block">If you have received an invitation code, paste it below.</span>
				<form ng-submit="acceptInvitation()">
					<div class="input-group">
						<input type="text" class="form-control" placeholder="Paste Invitation Code Here" ng-model="invitationCode">
						<span class="input-group-btn">
							<input type="submit" class="btn btn-primary" type="button" value="Go!">
						</span>
					</div>
				</form>
			</div>
		</div>
		-->

	</div>

	<div class="col-md-6">
		<div class="panel panel-default">
			<div class="panel-heading">
				<span class="panel-title">Open Cycles</span>
			</div>
			<div class="panel-body">
				<div ng-if="!(cycles | filter : {authorizations:{create:true}}).length">There are currently no open cycles.</div>
				<div ng-if="(cycles | filter : {authorizations:{create:true}}).length" class="list-group">
					<div ng-repeat="cycle in cycles | filter : {authorizations:{create:true}}" class="list-group-item">
						<h4 class="list-group-item-heading">{{cycle.title}}</h4>
						<div class="list-group-item-text" ng-bind-html="cycle.description"></div>
						<div style="padding: 1em 0 .5em;">
							<a ui-sref="portal.projects.create({cycle: cycle.id})" class="btn btn-sm btn-primary">Start Application</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- <div class="panel panel-default">
	<div class="panel-heading">
		<h3 class="panel-title">Messages</h3>
	</div>
	<div class="panel-body">

	</div>
</div>
 -->
